(function($) {
jQuery(document).ready(function(){
	var basePath = Drupal.settings.basePath;
	var pathname = window.location.pathname;
alert('test-');
	var arr = pathname.split('/');
    if(arr[2]=='node' && arr[4]=='edit') {
    	var valueSelected = $('#manage-ads-node-form #edit-field-ads-link-merchant-category select option:selected').val();
    	alert(value);
    	url = ( Drupal.settings.basePath + 'ads-link/merchant-cat/'+ valueSelected ).trim();
    	//$('#manage-ads-node-form #edit-field-ads-merchant-cat-merchant').find('select').html(data);
    }
	if(arr[4]=='p2rp-create' && arr[5]=='merchant') {
		$('#user-register-form--2 .form-item-name').children('label').html('Merchant Name'+'<span title="This field is required." class="form-required">*</span>');
	}
	$('.view-user-list .view-header .search-user').click(function(){
		$(this).parent().siblings().css('display', 'block');
	});
	
	$('.view-user-list .view-header .search-user').live('click' , function(){
		$(this).parent().siblings().css('display', 'block');
	});	

	
    $('fieldset#edit-select').each(function() {
        $(this).replaceWith( "<div id='bulk-op'>" + $(this).html() + "</div>" );
    }); 

    $('#coupons-node-form .vertical-tabs #edit-scheduler-settings #edit-unpublish-on .form-item-unpublish-on-time input').val('23:59:59');
    $('#manage-ads-node-form .vertical-tabs #edit-scheduler-settings #edit-unpublish-on .form-item-unpublish-on-time input').val('23:59:59');

    $('#manage-ads-node-form #edit-field-ads-link-merchant-category select').change(function () {
    	var optionSelected = $(this).find("option:selected");
        var valueSelected  = optionSelected.val();
        
        
        if(valueSelected=='_none') {
        	$(this).parents('#edit-field-ads-link-merchant-category').siblings('#edit-field-ads-merchant-cat-merchant').css({'display':'none !important'});
        }
        url = ( Drupal.settings.basePath + 'ads-link/merchant-cat/'+ valueSelected ).trim();
		$.ajax({
			url: url,
			context: document.body
			}).done(function(data) {
				$('#manage-ads-node-form #edit-field-ads-merchant-cat-merchant').css({'display':'block'});
				$('#manage-ads-node-form #edit-field-ads-merchant-cat-merchant').find('select').html(data);
				$('#manage-ads-node-form #edit-field-ads-link-merchant-category select').change(function () {
		    	var optionSelected = $('#manage-ads-node-form #edit-field-ads-link-merchant-category select').find("option:selected");
		        var valueSelected  = optionSelected.val();
		        
		        if(valueSelected=='_none') {
		        	$('#manage-ads-node-form #edit-field-ads-merchant-cat-merchant').addClass('hidedependee');
		        }else {
		        	$('#manage-ads-node-form #edit-field-ads-merchant-cat-merchant').removeClass('hidedependee');
		        }
				});
			});
		}); 
                 
    });

})(jQuery);
